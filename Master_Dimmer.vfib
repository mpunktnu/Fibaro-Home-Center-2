{"name":"Master Dimmer","type":"virtual_device","properties":{"deviceIcon":0,"currentIcon":"0","log":"","logTemp":"","mainLoop":"","ui.Slider1.value":1,"visible":"true","rows":[{"type":"slider","elements":[{"id":1,"lua":true,"waitForResponse":false,"caption":"Dim level","name":"Slider1","msg":"-- Put HC2 IP address here\nmyHC2 = Net.FHttp(\"192.168.5.17\",80);\n\n-- Put login info here (default admin/admin)\nmyHC2:setBasicAuthentication(\"admin\",\"admin\")\n\n-- Get all devices of type multilevelSwitch (dimmer)\nresponse, status, errorCode = myHC2:GET(\"/api/devices?type=com.fibaro.multilevelSwitch\");\n\n--Convert JSON response to table data\ndimmers = json.decode(response)\n\n-- Loop over device table\nfor loop = 1, #dimmers do\n  -- Store current device ID\n  device = dimmers[loop].id\n  \n  -- If device is not dead, call setValue with sliderValue\n  if fibaro:getValue(device, \"dead\") == \"0\" then\n    \n    --fibaro:debug(\"Dimmar \".._sliderValue_..\" p√• enhet: \"..device)\n  \tfibaro:call(device, \"setValue\", _sliderValue_)\n  end\nend\n\n-- Done!","buttonIcon":0,"value":88,"favourite":false,"main":true}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}